<script type="module">
    import firebase from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js';
    import 'https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js';
    import 'https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js';

    // Firebase 設定
    const firebaseConfig = {
        apiKey: "AIzaSyCiB7v1mdKuPMIB3SUHPpmriSXmAsQ5G3M",
        authDomain: "hand-sign-project.firebaseapp.com",
        projectId: "hand-sign-project",
        storageBucket: "hand-sign-project.firebasestorage.app",
        messagingSenderId: "338082830115",
        appId: "1:338082830115:web:95ca6cd329dc49b1191e96"
    };

    // 初始化 Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    let stream;
    let cameraOn = true;

    async function startCamera() {
        try {
            stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
            document.getElementById('camera').srcObject = stream;
        } catch (error) {
            document.getElementById('error-message').textContent = "無法啟動攝影機：" + error.message;
        }
    }

    async function toggleCamera() {
        if (cameraOn) {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                document.getElementById('camera').srcObject = null;
            }
            document.getElementById('toggle-camera').textContent = '開啟攝影機';
        } else {
            await startCamera();
            document.getElementById('toggle-camera').textContent = '關閉攝影機';
        }
        cameraOn = !cameraOn;
    }

    function search() {
        let query = document.getElementById('search-input').value;
        if (query) {
            // 查詢手語單字的邏輯
            document.getElementById('result-text').textContent = `正在搜尋手語單字: ${query}`;
        }
    }

    window.onload = startCamera;
</script>
